activate GuiExeSer
note over GuiExeSer: GuiExecutionServer

activate ExeSerG
note over ExeSerG: ExecutionServer-gRPC

activate DbEngine
note over DbEngine: DatabaseEngine

activate ChEngine
note over ChEngine: ChannelExecutionEngine

activate ChDbEngi
note over ChDbEngi: ChannelDatabaseEngine


activate Worker
note over Worker: ExecutionWorker

GuiExeSer -> ExeSerG: InformThatThereAreNewTestCasesOnExecutionQueue
ExeSerG -> ExeSerG: MessagePreparation
ExeSerG -> DbEngine: prepareInformThatThereAreNewTestCasesOnExecutionQueueSaveToCloudDB


DbEngine -> DbEngine: 1) loadTestCaseExecutionQueueMessages \n2)saveTestCasesOnOngoingExecutionsQueueSaveToCloudDB \n3) clearTestCasesExecutionQueueSaveToCloudDB \n4) loadTestCaseModelAndTestInstructionsAndTestInstructionContainersToBeAddedToExecutionQueueLoadFromCloudDB \n5) SaveTestInstructionsToExecutionQueueSaveToCloudDB \n6) saveTestInstructionAttributesUnderExecutionSaveToCloudDB
DbEngine ->> ChEngine: .\n***ChannelCommandCheckTestInstructionExecutionQueue***

ExeSerG <-- DbEngine :AckNack
deactivate DbEngine

GuiExeSer <-- ExeSerG: AckNack
deactivate ExeSerG
deactivate GuiExeSer

ChEngine -> ChDbEngi: (A) prepareInitiateExecutionsForTestInstructionsOnExecutionQueueSaveToCloudDB

ChDbEngi -> ChDbEngi: 1) loadTestInstructionExecutionQueueMessages \n2) saveTestInstructionsInOngoingExecutionsSaveToCloudDB \n3) clearTestInstructionExecutionQueueSaveToCloudDB

alt:  TestInstructionExecutions, under execution, are waiting to be sent to Worker
ChEngine <<-- ChDbEngi :1) DB-Commit \n2) ***ChannelCommandCheckNewTestInstructionExecutions*** Triggers (B)

ChEngine -> ChDbEngi :(B) sendNewTestInstructionsThatIsWaitingToBeSentWorker

ChDbEngi -> ChDbEngi: 1) loadNewTestInstructionToBeSentToExecutionWorkers \n2) transformRawTestInstructionsAndAttributeIntoGrpcMessages

ChDbEngi -> Worker: 3) sendTestInstructionExecutionsToWorker
ChDbEngi <-- Worker: AnkNack

ChDbEngi -> ChDbEngi: 4) updateStatusOnTestInstructionsExecutionInCloudDB \n5) updateStatusOnTestCasesExecutionInCloudDB (To 'Executing')

ChEngine <-- ChDbEngi :(AckNack)

else: All individual TestInstructionExecutions have been executed and are finished
ChEngine <<-- ChDbEngi :.\n1) DB-Rollback \n2) ***ChannelCommandUpdateFinalExecutionStatusOnTestCaseExecutionExecutions*** Trigger (C)

ChEngine -> ChDbEngi :(C) updateStatusOnTestCaseExecutionInCloudDB

ChDbEngi -> ChDbEngi: 1) loadTestInstructionExecutionStatusMessages \n2) transformTestInstructionExecutionStatusIntoTestCaseExecutionStatus \n3) updateTestCaseExecutionsWithNewTestCaseExecutionStatus

ChEngine <-- ChDbEngi :(AckNack)

end

ChEngine <-- ChDbEngi :(AckNack)
deactivate Worker
deactivate ChDbEngi
deactivate ChEngine

activate Worker
activate ExeSerG
ExeSerG <- Worker: prepareReportCompleteTestInstructionExecutionResultSaveToCloudDB

deactivate ChDbEngi


